---
globs: lib/app/modules/home/widgets/*.dart,lib/app/modules/home/views/*.dart,lib/app/controllers/swipe_controller.dart,lib/app/data/repositories/swipes_repository.dart
---
# Swipe Mechanics Spec

## Widgets & Components
- **Core stack**: `swipe_stack.dart` • **Cards**: `property_swipe_card.dart`
- 5-card visible stack with parallax effect

## Gestures → Actions
- **Swipe Right**: Like/interest + advance
- **Swipe Left**: Pass + advance
- **Swipe Up**: Quick details view
- **Double Tap**: Super-like + advance

## Visual Feedback & Animation
- **Rotation**: ±12° • **Scale**: 0.98 on drag
- **Color hints**: Green for like, red for pass
- **Badges**: LIKE/PASS/DETAILS/SUPER with `AppTheme` colors
- **Animation**: Spring curve + snap-back

## Controller Contract
```dart
RxList<PropertyModel> deck
RxInt currentIndex
void onDragUpdate(Offset delta)
Future<void> completeSwipe(SwipeAction action)
void cancelSwipe()
Future<void> undoLastSwipe()
```

## Data Integration
- **Repository**: `logSwipe(propertyId, action)` in `swipes_repository.dart`
- **Favorites**: Update via `PropertyController` for likes
- **Details**: Navigate to `Routes.propertyDetails`
- **Empty state**: Show CTA to Explore/Filters

```dart
enum SwipeAction { like, pass, details, superLike }
```